{"version":3,"sources":["helpers/loadAppContracts.js","hooks/useContractConfig.js","tokens.js","App.jsx","index.js"],"names":["contractListPromise","loadAppContracts","a","config","default","deployedContracts","useContractConfig","useState","contractsConfig","setContractsConfig","useEffect","result","loadFunc","TokenList","symbol","address","abi","require","App","err","setErr","buyFlag","setBuyFlag","amount","setAmount","quote","setQuote","loading","setLoading","sourceToken","setSourceToken","destToken","setDestToken","fee","setFee","provider","setProvider","providerAndSigner","useUserProviderAndSigner","contracts","useContractLoader","signer","tokens","ethers","providers","Web3Provider","window","ethereum","request","method","loadProvider","setErrorAlert","text","setTimeout","setQuoteAlert","getQuote","Quoter","doesPoolExist","formattedAmount","utils","parseEther","uniswap","Contract","expectedAmount","expectedAmountUniswap","estimateMaxSwapUniswapV3","callStatic","quoteExactInputSingle","estimateMinSwapUniswapV3","quoteExactOutputSingle","formatUnits","console","error","className","src","alt","width","height","role","type","name","id","onChange","autoComplete","checked","htmlFor","value","e","target","filter","token","map","idx","toFixed","onClick","disabled","aria-hidden","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4OAAMA,EAAsB,kCAEfC,EAAgB,uCAAG,8BAAAC,EAAA,6DACxBC,EAAS,GADe,SAEIH,EAFJ,wBAEyBI,QAFzB,4HAEoC,GAFpC,eAE9BD,EAAOE,kBAFuB,uBAGvBF,GAHuB,4CAAH,qDCcdG,EAbW,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACvBC,EADuB,KACNC,EADM,KAU9B,OAPAC,qBAAU,YACM,uCAAG,4BAAAR,EAAA,sEACMD,IADN,OACTU,EADS,OAEfF,EAAmBE,GAFJ,2CAAH,qDAITC,KACJ,IACIJ,GCbIK,G,OACJ,CACL,CACEC,OAAQ,OACRC,QAAS,8CAEX,CACED,OAAQ,MACRC,QAAS,8CAEX,CACED,OAAQ,OACRC,QAAS,8CAEX,CACED,OAAQ,MACRC,QAAS,gD,QCRbC,EACEC,EAAQ,KADVD,IAoLaE,MAjLf,WAAgB,IAAD,EACWX,mBAAS,IADpB,mBACLY,EADK,KACAC,EADA,OAEmBb,oBAAS,GAF5B,mBAELc,EAFK,KAEIC,EAFJ,OAGiBf,mBAAS,GAH1B,mBAGLgB,EAHK,KAGGC,EAHH,OAIejB,mBAAS,IAJxB,mBAILkB,EAJK,KAIEC,EAJF,OAKmBnB,oBAAS,GAL5B,mBAKLoB,EALK,KAKIC,EALJ,OAM2BrB,qBAN3B,mBAMLsB,EANK,KAMQC,EANR,OAOuBvB,qBAPvB,mBAOLwB,EAPK,KAOMC,EAPN,OAQWzB,qBARX,mBAQL0B,EARK,KAQAC,EARA,OAUqB3B,qBAVrB,mBAUL4B,EAVK,KAUKC,EAVL,KAYPjC,EAASG,IACT+B,EAAoBC,YAAyBH,GAC7CI,EAAYC,YAAkBH,EAAkBI,OAAQtC,EAH9C,IAKVuC,EAAS7B,EAGfH,qBAAW,YACS,uCAAG,4BAAAR,EAAA,6DACbiC,EAAW,IAAIQ,IAAOC,UAAUC,aAAaC,OAAOC,UADvC,SAEOD,OAAOC,SAASC,QAAQ,CAAEC,OAAQ,wBAFzC,cAGnBb,EAAYD,GAHO,2CAAH,qDAKlBe,KACC,IAEH,IAAMC,EAAgB,SAACC,GACrBhC,EAAOgC,GACPC,YAAW,WACTjC,EAAO,MACP,MAGEkC,EAAgB,SAACF,GACrB1B,EAAS0B,GACTC,YAAW,WACT3B,EAAS,MACT,MAGE6B,EAAQ,uCAAG,oCAAArD,EAAA,2DACZqB,GAAU,GADE,uBAEb4B,EAAc,kCAFD,iCAOfvB,GAAW,GAPI,kBAWQW,EAAUiB,OAAOC,cAAc5B,EAAaE,GAXpD,kCAcXoB,EAAc,uBAdH,2BAgBLO,EAAkBf,IAAOgB,MAAMC,WAAWrC,GAC1CsC,EAAU,IAAIlB,IAAOmB,SAAS,6CAA8C9C,EAAKmB,GAEnF4B,EAAiB,EACjBC,EAAwB,EAExB3C,EAtBO,kCAwBckB,EAAUiB,OAAOS,yBAAyBpC,EAAaE,EAAW2B,EAAiBzB,GAxBjG,eAwBT8B,EAxBS,iBAyBqBF,EAAQK,WAAWC,sBAC/CtC,EACAE,EACAE,EACAyB,EACA,GA9BO,QAyBTM,EAzBS,gDAkCczB,EAAUiB,OAAOY,yBAAyBrC,EAAWF,EAAa6B,EAAiBzB,GAlCjG,eAkCT8B,EAlCS,iBAmCqBF,EAAQK,WAAWG,uBAC/CxC,EACAE,EACAE,EACAyB,EACA,GAxCO,QAmCTM,EAnCS,eA4CLZ,EA5CK,oBA4Ce/B,EAAU,OAAS,UA5ClC,YA4C+CsB,IAAOgB,MAAMW,YAAYP,EAAgB,IA5CxF,iDA4CoIpB,IAAOgB,MAAMW,YAAYN,EAAuB,IA5CpL,YA6CXV,EAAcF,GA7CH,0DAiDbmB,QAAQC,MAAM,kBACdD,QAAQC,MAAR,MACArB,EAAc,kBAnDD,QAsDfvB,GAAW,GAtDI,0DAAH,qDAyDd,OACE,sBAAM6C,UAAU,0BAAhB,SACE,iCACE,qBAAKA,UAAU,OAAOC,IAAI,yGAAyGC,IAAI,eAAeC,MAAM,KAAKC,OAAO,OACxK,oBAAIJ,UAAU,oBAAd,+BAEA,sBAAKA,UAAU,iBAAiBK,KAAK,QAArC,UACE,uBAAOC,KAAK,QAAQN,UAAU,YAAYO,KAAK,WAAWC,GAAG,MAAMC,SAAU,kBAAI5D,GAAW,IAAO6D,aAAa,MAAMC,QAAS/D,IAC/H,uBAAOoD,UAAU,0BAA0BY,QAAQ,MAAnD,iBAEA,uBAAON,KAAK,QAAQN,UAAU,YAAYO,KAAK,WAAWC,GAAG,OAAOC,SAAU,kBAAI5D,GAAW,IAAQ6D,aAAa,MAAMC,SAAU/D,IAClI,uBAAOoD,UAAU,0BAA0BY,QAAQ,OAAnD,qBAEF,sBAAKZ,UAAU,gBAAf,UACE,yBAAQA,UAAU,cAAcQ,GAAG,sBAAsBK,MAAOzD,EAAaqD,SAAU,SAACK,GAAD,OAAOzD,EAAeyD,EAAEC,OAAOF,QAAtH,UACE,+CACE5C,EAAO+C,QAAO,SAACC,GAAD,OAAWA,EAAM3E,UAAYgB,KAAW4D,KAAI,SAACD,EAAOE,GAAR,OAC1D,wBAAQN,MAAOI,EAAM3E,QAArB,SAAyC2E,EAAM5E,QAAZ8E,SAGvC,uBAAOP,QAAQ,sBAAf,6BAEF,sBAAKZ,UAAU,gBAAf,UACE,yBAAQA,UAAU,cAAcQ,GAAG,oBAAoBK,MAAOvD,EAAWmD,SAAU,SAACK,GAAD,OAAOvD,EAAauD,EAAEC,OAAOF,QAAhH,UACE,+CACE5C,EAAO+C,QAAO,SAACC,GAAD,OAAWA,EAAM3E,UAAYc,KAAa8D,KAAI,SAACD,EAAOE,GAAR,OAC5D,wBAAQN,MAAOI,EAAM3E,QAArB,SAAyC2E,EAAM5E,QAAZ8E,SAGvC,uBAAOP,QAAQ,oBAAf,kCAEF,sBAAKZ,UAAU,gBAAf,UACE,uBAAOM,KAAK,SAASN,UAAU,eAAeQ,GAAG,iBAAiBK,MAAO/D,EAAQ2D,SAAU,SAACK,GAAD,OAAO/D,EAAU+D,EAAEC,OAAOF,UACrH,wBAAOD,QAAQ,iBAAf,WACIhE,GACA,+DAIDA,GACC,0EAMN,sBAAKoD,UAAU,gBAAf,UACE,yBAAQA,UAAU,cAAcQ,GAAG,cAAcC,SAAU,SAACK,GAAD,OAAOrD,EAAOqD,EAAEC,OAAOF,QAAlF,UACA,+CAlIS,CAAE,IAAK,IAAM,KAmIXK,KAAI,SAAC1D,EAAK2D,GAAN,OACX,wBAAQN,MAAOrD,EAAf,UAAgCA,EAAM,KAAO4D,QAAQ,GAAK,KAAjCD,SAG7B,uBAAOP,QAAQ,cAAf,oBAGF,wBAEE1D,GACA,wBAAQ8C,UAAU,+BAA+BM,KAAK,SAASe,QAAS,kBAAIvC,KAA5E,mBAED5B,GACC,yBAAQ8C,UAAU,+BAA+BM,KAAK,SAASgB,UAAQ,EAAvE,UACE,sBAAMtB,UAAU,mCAAmCK,KAAK,SAASkB,cAAY,SAD/E,oBAIU,KAAVvE,GACA,qBAAKgD,UAAU,gCAAgCK,KAAK,QAApD,SAA6DrD,IAErD,KAARN,GACA,qBAAKsD,UAAU,+BAA+BK,KAAK,QAAnD,SAA4D3D,IAE9D,mBAAGsD,UAAU,uBAAb,kDClLRwB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.8917666d.chunk.js","sourcesContent":["const contractListPromise = import(\"../abi/contracts.json\");\n\nexport const loadAppContracts = async () => {\n  const config = {};\n  config.deployedContracts = (await contractListPromise).default ?? {};\n  return config;\n};\n","import { useState, useEffect } from \"react\";\nimport { loadAppContracts } from \"../helpers/loadAppContracts\";\n\nconst useContractConfig = () => {\n  const [contractsConfig, setContractsConfig] = useState({});\n\n  useEffect(() => {\n    const loadFunc = async () => {\n      const result = await loadAppContracts();\n      setContractsConfig(result);\n    };\n    void loadFunc();\n  }, []);\n  return contractsConfig;\n};\n\nexport default useContractConfig;\n","export const TokenList = {\n  kovan: [\n    {\n      symbol: \"WETH\",\n      address: \"0xd0A1E359811322d97991E03f863a0C30C2cF029C\"\n    },\n    {\n      symbol: \"DAI\",\n      address: \"0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa\"\n    },\n    {\n      symbol: \"LINK\",\n      address: \"0xa36085F69e2889c224210F603D836748e7dC0088\"\n    },\n    {\n      symbol: \"UNI\",\n      address: \"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984\"\n    }\n  ],\n  mainnet: [\n    {\n      symbol: \"WETH\",\n      address: \"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2\"\n    },\n    {\n      symbol: \"DAI\",\n      address: \"0x6B175474E89094C44Da98b954EedeAC495271d0F\"\n    },\n    {\n      symbol: \"LINK\",\n      address: \"0x514910771AF9Ca656af840dff83E8264EcF986CA\"\n    },\n    {\n      symbol: \"UNI\",\n      address: \"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984\"\n    }\n  ]\n};\n","import React, { useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\nimport { useContractLoader, useUserProviderAndSigner } from \"eth-hooks\";\nimport useContractConfig from \"./hooks/useContractConfig\";\nimport './App.css';\nimport { TokenList } from \"./tokens.js\";\n\nconst {\n  abi,\n} = require(\"@uniswap/v3-periphery/artifacts/contracts/lens/Quoter.sol/Quoter.json\");\n\nfunction App() {\n  const [ err, setErr ] = useState(\"\");\n  const [ buyFlag, setBuyFlag ] = useState(false);\n  const [ amount, setAmount ] = useState(0.0);\n  const [ quote, setQuote ] = useState(\"\");\n  const [ loading, setLoading ] = useState(false);\n  const [ sourceToken, setSourceToken ] = useState();\n  const [ destToken, setDestToken ] = useState();\n  const [ fee, setFee ] = useState();\n\n  const [ provider, setProvider ] = useState();\n  const chainId = 42;\n  const config = useContractConfig();\n  const providerAndSigner = useUserProviderAndSigner(provider)\n  const contracts = useContractLoader(providerAndSigner.signer, config, chainId);\n\n  const tokens = TokenList.kovan;\n  const poolFees = [ 500, 3000, 10000 ];\n\n  useEffect( () => {\n    const loadProvider = async() => {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const userAccount = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      setProvider(provider);\n    }\n    loadProvider();\n  }, []);\n\n  const setErrorAlert = (text) => {\n    setErr(text);\n    setTimeout(() => {\n      setErr(\"\");\n   }, 2000);\n  }\n\n  const setQuoteAlert = (text) => {\n    setQuote(text);\n    setTimeout(() => {\n      setQuote(\"\");\n   }, 10000);\n  }\n\n  const getQuote = async () => {\n    if(amount <= 0) {\n      setErrorAlert(\"Amount cannot be 0 or negative\");\n\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n\n      const exists = await contracts.Quoter.doesPoolExist(sourceToken, destToken);\n      \n      if(!exists) {\n        setErrorAlert(\"Pool does not exist\");\n      } else {\n        const formattedAmount = ethers.utils.parseEther(amount);\n        const uniswap = new ethers.Contract(\"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6\", abi, provider);\n\n        let expectedAmount = 0;\n        let expectedAmountUniswap = 0;\n        \n        if(!buyFlag) {\n          // Sell\n          expectedAmount = await contracts.Quoter.estimateMaxSwapUniswapV3(sourceToken, destToken, formattedAmount, fee);\n          expectedAmountUniswap = await uniswap.callStatic.quoteExactInputSingle(\n            sourceToken,\n            destToken,\n            fee,\n            formattedAmount,\n            0\n          );\n        } else {\n          // Buy\n          expectedAmount = await contracts.Quoter.estimateMinSwapUniswapV3(destToken, sourceToken, formattedAmount, fee);\n          expectedAmountUniswap = await uniswap.callStatic.quoteExactOutputSingle(\n            sourceToken,\n            destToken,\n            fee,\n            formattedAmount,\n            0\n          );\n        }\n\n        const text = `You would ${buyFlag ? \"give\" : \"receive\"} ${ethers.utils.formatUnits(expectedAmount, 18)} tokens. Uniswap lens quoter returned ${ethers.utils.formatUnits(expectedAmountUniswap, 18)} tokens.`;\n        setQuoteAlert(text);\n      }\n\n    } catch(e) {\n      console.error(\"Error occurred\");\n      console.error(e);\n      setErrorAlert(\"Internal Error\");\n    }\n\n    setLoading(false);\n  };\n\n  return (\n    <main className=\"text-center form-signin\">\n      <form>\n        <img className=\"mb-4\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Uniswap_Logo.svg/1026px-Uniswap_Logo.svg.png\" alt=\"Uniswap logo\" width=\"72\" height=\"72\" />\n        <h1 className=\"mb-3 h3 fw-normal\">Uniswap V3 Quoter</h1>\n\n        <div className=\"mb-3 btn-group\" role=\"group\">\n          <input type=\"radio\" className=\"btn-check\" name=\"btnradio\" id=\"buy\" onChange={()=>setBuyFlag(true)} autoComplete=\"off\" checked={buyFlag} />\n          <label className=\"btn btn-outline-primary\" htmlFor=\"buy\">BUY</label>\n        \n          <input type=\"radio\" className=\"btn-check\" name=\"btnradio\" id=\"sell\" onChange={()=>setBuyFlag(false)} autoComplete=\"off\" checked={!buyFlag} />\n          <label className=\"btn btn-outline-primary\" htmlFor=\"sell\">SELL</label>\n        </div>\n        <div className=\"form-floating\">\n          <select className=\"form-select\" id=\"floatingSourceToken\" value={sourceToken} onChange={(e) => setSourceToken(e.target.value)}>\n            <option>Choose...</option>\n            { tokens.filter((token) => token.address !== destToken).map((token, idx) => \n              <option value={token.address} key={idx}>{token.symbol}</option>\n            )}\n          </select>\n          <label htmlFor=\"floatingSourceToken\">Source Token</label>\n        </div>\n        <div className=\"form-floating\">\n          <select className=\"form-select\" id=\"floatingDestToken\" value={destToken} onChange={(e) => setDestToken(e.target.value)}>\n            <option>Choose...</option>\n            { tokens.filter((token) => token.address !== sourceToken).map((token, idx) => \n              <option value={token.address} key={idx}>{token.symbol}</option>\n            )}\n          </select>\n          <label htmlFor=\"floatingDestToken\">Destination Token</label>\n        </div>\n        <div className=\"form-floating\">\n          <input type=\"number\" className=\"form-control\" id=\"floatingAmount\" value={amount} onChange={(e) => setAmount(e.target.value)} />\n          <label htmlFor=\"floatingAmount\">\n            {!buyFlag &&\n              <>\n                Amount in source tokens\n              </>\n            }\n            {buyFlag &&\n              <>\n                Amount in destination tokens\n              </>\n            }\n          </label>\n        </div>\n        <div className=\"form-floating\">\n          <select className=\"form-select\" id=\"floatingFee\" onChange={(e) => setFee(e.target.value)}>\n          <option>Choose...</option>\n          { poolFees.map((fee, idx) => \n              <option value={fee} key={idx}>{(fee / 10000).toFixed(2) + '%'}</option>\n            )}\n          </select>\n          <label htmlFor=\"floatingFee\">Fee</label>\n        </div>\n\n        <br />\n\n        {!loading &&\n          <button className=\"w-100 btn btn-lg btn-primary\" type=\"button\" onClick={()=>getQuote()}>Quote</button>\n        }\n        {loading &&\n          <button className=\"w-100 btn btn-lg btn-primary\" type=\"button\" disabled>\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;Loading...\n          </button>\n        }\n        { quote !== \"\" &&\n          <div className=\"alert alert-primary text-wrap\" role=\"alert\">{quote}</div>\n        }\n        { err !== \"\" &&\n          <div className=\"alert alert-danger text-wrap\" role=\"alert\">{err}</div>\n        }\n        <p className=\"mt-5 mb-3 text-muted\">Made for Unicode Hack - v0.0.4</p>\n      </form>\n    </main>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}